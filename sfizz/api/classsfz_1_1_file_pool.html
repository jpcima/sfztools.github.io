<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Home - Sfizz</title>
		<meta name="author" content="Paul Ferrand">
		<meta name="web-author" content="RedTide">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<!-- Atom Feeds -->
		<link href="./../atom.xml" rel="alternate" title="News"
			type="application/atom+xml" />
		<!-- Favicon Generator Icons -->
		<link rel="apple-touch-icon" sizes="180x180"
			href="./../assets/ico/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="./../assets/ico/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="./../assets/ico/favicon-16x16.png">
		<link rel="manifest" href="./../assets/ico/site.webmanifest">
		<link rel="mask-icon" href="./../assets/ico/safari-pinned-tab.svg"
			color="#5bbad5">
		<link rel="shortcut icon" href="./../assets/ico/favicon.ico">
		<meta name="msapplication-TileColor"
			content="#da532c">
		<meta name="msapplication-config" content="./../assets/ico/browserconfig.xml">
		<meta name="theme-color" content="#ffffff">
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css"/>
		<!-- Stylesheets -->
		<link href="./../assets/css/style.min.css"
			rel="stylesheet" media="screen">
		<!-- Font Awesome Icons -->
		<script src="https://kit.fontawesome.com/8d25d19870.js"></script>
	</head>
	<body>
        <div class="container">
		<button onclick="topFunction()" id="scrollButton" title="Go to top">Top</button>
		<a href="#content" class="sr-only">Skip to content</a>
			<nav class="navbar navbar-expand-lg navbar-dark" style="background-color:#222">
				<a class="navbar-brand" href="./../"><img src="./../assets/img/logo.png"
                    width="30" height="30" class="d-inline-block">Sfizz</a>
				<button class="navbar-toggler" type="button" data-toggle="collapse"
					data-target="#navbarContent" aria-controls="navbarContent"
					aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse" id="navbarContent">
					<ul class="navbar-nav mr-auto mt-2 mt-lg-0">
						<li class="nav-item">
							<a class="nav-link" href="./../status"><i class="fas fa-tasks fa-fw"
									aria-hidden="true"></i>&nbsp;Status</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="./../downloads"><i class="fas fa-download fa-fw"
									aria-hidden="true"></i>&nbsp;Downloads</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="./../contacts"><i class="fas fa-at fa-fw"
									aria-hidden="true"></i>&nbsp;Contacts</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="https://sfztools.github.io/"><i class="fas fa-home fa-fw"
									aria-hidden="true"></i>&nbsp;Home</a>
						</li>
					</ul>
				</div>
			</nav>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacesfz.html">sfz</a></li><li class="navelem"><a class="el" href="classsfz_1_1_file_pool.html">FilePool</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classsfz_1_1_file_pool-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">sfz::FilePool Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This is a singleton-designed class that holds all the preloaded data as well as functions to request new file data and collect the file handles to close after they are read.  
 <a href="classsfz_1_1_file_pool.html#details">More...</a></p>

<p><code>#include &lt;FilePool.h&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8af2ebf9ec28ebccf2e119a4b38eead7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsfz_1_1_file_pool.html#a8af2ebf9ec28ebccf2e119a4b38eead7">setRootDirectory</a> (const fs::path &amp;directory) noexcept</td></tr>
<tr class="memdesc:a8af2ebf9ec28ebccf2e119a4b38eead7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the root directory from which to search for files to load.  <a href="#a8af2ebf9ec28ebccf2e119a4b38eead7">More...</a><br /></td></tr>
<tr class="separator:a8af2ebf9ec28ebccf2e119a4b38eead7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fe514d5486bbdcfb5f30fd2d02694b4"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsfz_1_1_file_pool.html#a2fe514d5486bbdcfb5f30fd2d02694b4">getNumPreloadedSamples</a> () const noexcept</td></tr>
<tr class="memdesc:a2fe514d5486bbdcfb5f30fd2d02694b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of preloaded sample files.  <a href="#a2fe514d5486bbdcfb5f30fd2d02694b4">More...</a><br /></td></tr>
<tr class="separator:a2fe514d5486bbdcfb5f30fd2d02694b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa874478a8b3074ca0cc7b126e9ee952b"><td class="memItemLeft" align="right" valign="top">absl::optional&lt; FileInformation &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsfz_1_1_file_pool.html#aa874478a8b3074ca0cc7b126e9ee952b">getFileInformation</a> (const std::string &amp;filename) noexcept</td></tr>
<tr class="memdesc:aa874478a8b3074ca0cc7b126e9ee952b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get metadata information about a file.  <a href="#aa874478a8b3074ca0cc7b126e9ee952b">More...</a><br /></td></tr>
<tr class="separator:aa874478a8b3074ca0cc7b126e9ee952b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3430758f4b1ab97c27620de5fc727155"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsfz_1_1_file_pool.html#a3430758f4b1ab97c27620de5fc727155">preloadFile</a> (const std::string &amp;filename, uint32_t maxOffset) noexcept</td></tr>
<tr class="memdesc:a3430758f4b1ab97c27620de5fc727155"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check that a file is preloaded with the proper offset bounds.  <a href="#a3430758f4b1ab97c27620de5fc727155">More...</a><br /></td></tr>
<tr class="separator:a3430758f4b1ab97c27620de5fc727155"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e9b651ad7b87601df6470cc6ecd9432"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsfz_1_1_file_pool.html#a1e9b651ad7b87601df6470cc6ecd9432">clear</a> ()</td></tr>
<tr class="memdesc:a1e9b651ad7b87601df6470cc6ecd9432"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear all preloaded files.  <a href="#a1e9b651ad7b87601df6470cc6ecd9432">More...</a><br /></td></tr>
<tr class="separator:a1e9b651ad7b87601df6470cc6ecd9432"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This is a singleton-designed class that holds all the preloaded data as well as functions to request new file data and collect the file handles to close after they are read. </p>
<p>This object caches the file data that was already preloaded in case it is asked again by a region using the same sample. In this situation, both regions have a handle on the same preloaded data.</p>
<p>The file request is immediately served using the preloaded data. A ticket is then provided to the voice that requested the file, and the file loading happens in the background. When the file is fully loaded, the background makes the full data available to the voice and consumes the ticket, while conserving a handle on this file. When the voice dies it releases its handle on the files, which should decrease the reference count to 1. A garbage collection thread then runs regularly to clear the memory of all file handles with a reference count of 1. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a1e9b651ad7b87601df6470cc6ecd9432"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e9b651ad7b87601df6470cc6ecd9432">&#9670;&nbsp;</a></span>clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sfz::FilePool::clear </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear all preloaded files. </p>

</div>
</div>
<a id="aa874478a8b3074ca0cc7b126e9ee952b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa874478a8b3074ca0cc7b126e9ee952b">&#9670;&nbsp;</a></span>getFileInformation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">absl::optional&lt;FileInformation&gt; sfz::FilePool::getFileInformation </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get metadata information about a file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>absl::optional&lt;FileInformation&gt; </dd></dl>

</div>
</div>
<a id="a2fe514d5486bbdcfb5f30fd2d02694b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fe514d5486bbdcfb5f30fd2d02694b4">&#9670;&nbsp;</a></span>getNumPreloadedSamples()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t sfz::FilePool::getNumPreloadedSamples </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the number of preloaded sample files. </p>
<dl class="section return"><dt>Returns</dt><dd>size_t </dd></dl>

</div>
</div>
<a id="a3430758f4b1ab97c27620de5fc727155"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3430758f4b1ab97c27620de5fc727155">&#9670;&nbsp;</a></span>preloadFile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool sfz::FilePool::preloadFile </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>maxOffset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check that a file is preloaded with the proper offset bounds. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td></td></tr>
    <tr><td class="paramname">offset</td><td>the maximum offset to consider for preloading. The total preloaded size will be preloadSize + offset </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the preloading went fine </dd>
<dd>
false if something went wrong () </dd></dl>

</div>
</div>
<a id="a8af2ebf9ec28ebccf2e119a4b38eead7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8af2ebf9ec28ebccf2e119a4b38eead7">&#9670;&nbsp;</a></span>setRootDirectory()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sfz::FilePool::setRootDirectory </td>
          <td>(</td>
          <td class="paramtype">const fs::path &amp;&#160;</td>
          <td class="paramname"><em>directory</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the root directory from which to search for files to load. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">directory</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
			<hr>
			<footer>
				<p style="text-align:left">Copyright &copy; 2019 Paul Ferrand
					<span style="float:right">Generated on Tue Dec 3 2019 20:42:05 for sfizz by
						<a href="http://www.doxygen.org/index.html"
							target="_new">Doxygen</a> 1.8.13</span>
				</p>
			</footer>
            </div>
		<script src="./../assets/js/scripts.min.js"></script>
	</body>
</html>
